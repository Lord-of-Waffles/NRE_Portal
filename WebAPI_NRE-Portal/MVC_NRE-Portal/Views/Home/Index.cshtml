@model List<ProductionDataDto>
@using System.Text.Json

@{
    ViewData["Title"] = "NRE - Home Page";
}

<h1>Porta of the new renewable energy in Valais</h1>

<div class="text-center" style=" display: flex; gap: 20px; margin-bottom: 40px;">
    <!-- Line Chart 1 -->
    <div style="flex: 1;">
        <canvas id="lineChart1" width="400" height="200"></canvas>
    </div>
    <!-- Line Chart 2 -->
    <div style="flex: 1;">
        <canvas id="lineChart2" width="400" height="200"></canvas>
    </div>
</div>

<!-- Pie Chart -->
<div style="width: 50%; margin-bottom: 40px;">
    <canvas id="pieChart" width="400" height="200"></canvas>
</div>

<!-- Navigation Button -->
<div>
    <a asp-page="/AnotherPage" class="btn btn-primary">NRE detail</a>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Convert C# data into JSON
        const chartData = @Html.Raw(JsonSerializer.Serialize(Model))

        // Extract labels and values
        const labels = chartData.map(x => x.Year);
        const values = chartData.map(x => x.ProductionKw);

        // Chart
        const ctx = document.getElementById('lineChart1');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets:[{
                    label: 'Production (Kw)',
                    data: values,
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgb(54,162,235)',
                    borderWidth: 1
                }]
            },
           // options: { scales: {y: {beginAtZero: true}}}
        })
    </script>
}
